<!DOCTYPE html><html style="height: auto; min-height: 100%;"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>관리자[구역카드관리]</title>
  <!-- Tell the browser to be responsive to screen width -->
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <!-- Bootstrap 3.3.7 -->
  <link rel="stylesheet" href="/assets/adminLTE243/bower_components/bootstrap/dist/css/bootstrap.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="/assets/adminLTE243/bower_components/font-awesome/css/font-awesome.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="/assets/adminLTE243/bower_components/Ionicons/css/ionicons.min.css">
  <!-- DataTables -->
  <link rel="stylesheet" href="/assets/adminLTE243/bower_components/datatables.net-bs/css/dataTables.bootstrap.min.css">
  <link rel="stylesheet" href="/assets/adminLTE243/bower_components/datatables.net-bs/css/select.dataTables.min.css">
  <link rel="stylesheet" href="/assets/adminLTE243/bower_components/datatables.net-bs/css/dataTables.fixedColumns.min.css">
  
  <!-- SweetAlert -->
  <link rel="stylesheet" href="/assets/css/sweetalert2.css">
  <link rel="stylesheet" href="/assets/plugins/datepicker/datepicker3.css">
    <!-- Theme style -->
  <link rel="stylesheet" href="/assets/adminLTE243/dist/css/AdminLTE.min.css">
  <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
  <link rel="stylesheet" href="/assets/adminLTE243/dist/css/skins/skin-green-light.min.css">
  <!--link rel="stylesheet" href="dist/css/skins/_all-skins.min.css"-->

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  <!-- Google Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">

	<!-- jQuery 3 -->
	<script src="/assets/adminLTE243/bower_components/jquery/dist/jquery.min.js"></script>
	<!-- jQuery UI 1.11.4 -->
	<script src="/assets/adminLTE243/bower_components/jquery-ui/jquery-ui.min.js"></script>
	<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
	<script>
	  $.widget.bridge('uibutton', $.ui.button);
	</script>
	<!-- Bootstrap 3.3.7 -->
	<script src="/assets/adminLTE243/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
	<!-- DataTables -->
	<script src="/assets/adminLTE243/bower_components/datatables.net/js/jquery.dataTables.min.js"></script>
	<script src="/assets/adminLTE243/bower_components/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
	<script src="/assets/adminLTE243/bower_components/datatables.net-bs/js/dataTables.select.min.js"></script>
	<script src="/assets/adminLTE243/bower_components/datatables.net-bs/js/dataTables.fixedColumns.min.js"></script>
	<!-- AdminLTE App -->
	<script src="/assets/adminLTE243/dist/js/adminlte.min.js"></script>
	<!-- SweetAlert -->
	<script src="/assets/js/sweetalert2.min.js"></script>
	<script src="/assets/plugins/datepicker/bootstrap-datepicker.js"></script>
   <script src="/assets/js/mustache.min.js"></script>
</head>
<body class="skin-green-light sidebar-mini" style="height: auto; min-height: 100%;">
<div class="wrapper" style="height: auto; min-height: 100%;">

  <header class="main-header">
    <!-- Logo -->
    <a href="/adm/admlist" class="logo">
      <!-- mini logo for sidebar mini 50x50 pixels -->
      <span class="logo-mini" style="font-size:14px"><b>구역</b></span>
      <!-- logo for regular state and mobile devices -->
      <span class="logo-lg"><b>구역카드관리</b></span>
    </a>
    <!-- Header Navbar: style can be found in header.less -->
    <nav class="navbar navbar-static-top">
      <a href="#" class="sidebar-toggle" data-toggle="push-menu" role="button">
        <span class="sr-only">Toggle navigation</span>
      </a>
      <!-- Sidebar toggle button-->
	  <div style="float:right; margin-top:15px; padding-right:15px"><a href="/adm/login/logout" style="font-weight:bold; color:white;">로그아웃</a></div>
    </nav>
  </header>  <!-- Left side column. contains the logo and sidebar -->
  <aside class="main-sidebar">
    <!-- sidebar: style can be found in sidebar.less -->
    <section class="sidebar">
      <!-- Sidebar user panel -->
      <!-- sidebar menu: : style can be found in sidebar.less -->
      <ul class="sidebar-menu tree" data-widget="tree">
	          <li class="treeview">
          <a href="#" onclick="javascript:location.href = '/adm/admlist';">
            <i class="fa fa-user-secret"></i> <span>관리자 목록</span>
          </a>
        </li>
	  
        <li class="treeview">
          <a href="#" onclick="javascript:location.href = '/adm/helpdesk';">
            <i class="fa fa-bullhorn"></i> <span>공지사항</span>
          </a>
        </li>

        <li class="treeview">
          <a href="#" onclick="javascript:location.href = '/adm/user';">
            <i class="fa fa-user"></i> <span>사용자 관리</span>
          </a>
        </li>
        <li class="active treeview menu-open">
          <a href="#" onclick="javascript:location.href = '/adm/cardlist';">
            <i class="fa fa-clone"></i> <span>구역카드 목록</span>
          </a>
        </li>
        <li class="treeview">
          <a href="#" onclick="javascript:location.href = '/adm/cardhome';">
            <i class="fa fa-clone"></i> <span>구역카드 가구등록</span>
          </a>
        </li>
        <li class="treeview">
          <a href="#" onclick="javascript:location.href = '/adm/cardpackage';">
            <i class="fa fa-object-group"></i> <span>구역카드 패키지</span>
          </a>
        </li>
        <li class="treeview">
          <a href="#" onclick="javascript:location.href = '/adm/cardgroup';">
            <i class="fa fa-object-ungroup"></i> <span>구역카드 그룹배정</span>
          </a>
        </li>
        <li class="treeview">
          <a href="#" onclick="javascript:location.href = '/adm/packagegroup';">
            <i class="fa fa-object-ungroup"></i> <span>패키지 그룹배정</span>
          </a>
        </li>
        <li class="treeview">
          <a href="#" onclick="javascript:location.href = '/adm/cardprint';">
            <i class="fa fa-print"></i> <span>구역카드 인쇄</span>
          </a>
        </li>

        <li class="treeview">
          <a href="#" onclick="javascript:location.href = '/adm/servicemeeting';">
            <i class="fa fa-calendar-check-o"></i> <span>봉사모임 등록</span>
          </a>
        </li>

        <li class="treeview">
          <a href="#" onclick="javascript:location.href = '/adm/serviceresult';">
            <i class="fa fa-newspaper-o"></i> <span>봉사결과&amp;방문금지</span>
          </a>
        </li>


        <li class="treeview">
          <a href="#" onclick="javascript:location.href = '/adm/notvisithome';">
            <i class="fa fa-newspaper-o"></i> <span>방문금지 가구조회</span>
          </a>
        </li>        

        <li class="treeview">
          <a href="#" onclick="javascript:location.href = '/adm/bigo';">
            <i class="fa fa-edit"></i> <span>비고 보기</span>
          </a>
        </li>

        <li class="treeview">
          <a href="#" onclick="javascript:location.href = '/adm/config';">
            <i class="fa fa-gear"></i> <span>환경설정</span>
          </a>
        </li>

		  <hr style="margin-top:0px; margin-bottom:5px; border-top-color:#CCCCCC">
		  <div style="margin-bottom:8px; font-size:12px; text-align:right; padding-right:5px">전시대</div>

        <li class="treeview">
          <a href="#" onclick="javascript:location.href = '/adm/displaySchedule';">
            <i class="fa fa-calendar"></i> <span>봉사타임</span>
          </a>
        </li>

        <li class="treeview">
          <a href="#">
            <i class="fa fa-gear"></i> <span>환경 설정</span>
          </a>
        </li>
        <li class="treeview">
          <a href="#" onclick="javascript:location.href = '/adm/displayConfig';" style="padding-left:29px; color:#888888">
            - <span>일반 설정</span>
          </a>
        </li>
        <li class="treeview">
          <a href="#" onclick="javascript:location.href = '/adm/displayPlace';" style="padding-left:29px; color:#888888">
            - <span>봉사 장소 관리</span>
          </a>
        </li>
      </ul>
    </section>
    <!-- /.sidebar -->
  </aside>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper" style="min-height: 823.141px;">
    <section class="content"><style>
.clGeneralTxt {
	width:100%;
	border:0px;
}
.clModifyTxt {
	width:100%;
}
</style>
	<!-- services(장소 검색 과 주소-좌표 변환 을 할 수 있는 services 라이브러리)와 
		clusterer(마커를 클러스터링 할 수 있는 클러스터러 라이브러리), 
		drawing 라이브러리(지도 위에 마커와 그래픽스 객체를 쉽게 그릴 수 있게 그리기 모드를 지원하는 drawing 라이브러리) 불러오기 -->
	<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=ea1a783d9105963119a171bf64f57363&amp;libraries=services,clusterer,drawing"></script><script charset="UTF-8" src="https://t1.daumcdn.net/mapjsapi/js/main/4.4.21/kakao.js"></script><script charset="UTF-8" src="https://t1.daumcdn.net/mapjsapi/js/libs/services/1.0.2/services.js"></script><script charset="UTF-8" src="https://t1.daumcdn.net/mapjsapi/js/libs/clusterer/1.0.9/clusterer.js"></script><script charset="UTF-8" src="https://t1.daumcdn.net/mapjsapi/js/libs/drawing/1.2.6/drawing.js"></script>
    <section class="content-header">
        <h4>
            구역카드 목록
        </h4>
        <ol class="breadcrumb">
            <li><i class="fa fa-dashboard"></i>Home</li>
            <li class="active">구역카드 목록</li>
        </ol>
    </section>
    <!-- Main content -->
    <section class="content" id="jw-container" style="">
		<div style="clear:both; width:100%; height:30px; color:#2323cb">
			※ (팁: Ctrl 키 또는 Shift 키를 사용하여 멀티 선택 가능)
		</div>		
		<div style="width:990px">
			<div style="clear:both;width:850px; height:45px; display:inline-block">
				<span style="width:110px;float:left; line-height:35px">
					<input type="radio" name="ra_move" id="ra_move1" value="address" onclick="javascript:changeRaMove(this.value);" style="">주소
					&nbsp;
					<input type="radio" name="ra_move" id="ra_move2" value="keyword" checked="" onclick="javascript:changeRaMove(this.value);" style="">키워드
				</span>
				<span style="width:580px;float:left">
					<input type="text" class="form-control" name="tbMoveToWant" id="tbMoveToWant" value="" placeholder="이동하고자 하는 키워드를 입력하세요(예: 마산역, 경남대학교)" style="width: 500px;" onkeypress="javascript:return moveMapDataEvent(event)">
				</span>
				<span style="width:80px;float:right;text-align:right">
					<button class="btn btn-block btn-primary" onclick="javascript:moveMapData();">지도이동</button>
				</span>
			</div>
			<div style="clear:both; width:1050px; height:580px">
				<div style="float:left;width:300px;height:100%; padding:0px; ">
					<div style="width:100%; height:30px; ">
						<div style="width:50%;float:left">
							<button class="btn btn-sm btn-primary ClCardList" disabled="" onclick="javascript:reDraw(event);">다시그리기</button>
							<button class="btn btn-sm btn-primary ClCardList" disabled="" onclick="javascript:completeRedraw();">마침</button>
						</div>
						<div style="width:50%;float:right">
							<button class="btn btn-sm btn-primary ClCardList" disabled="" onclick="javascript:selCopyMap();">복사</button>								
							<button class="btn btn-sm btn-primary ClCardList" disabled="" onclick="javascript:selModifyMap();">수정</button>
							<button class="btn btn-sm btn-danger ClCardList" disabled="" style="margin-left:3px" onclick="javascript:selDelMap();">삭제</button>
						</div>
					</div>
					<div style="width:100%; height:30px; margin-top:6px">
						<select class="form-control" name="sear_group" id="sear_group" onchange="getCoordCardList(1);">
							<option value="">그룹으로 검색</option>
						<option value="326">테스트그룹</option><option value="327">테스트그룹2</option></select>
						<input type="text" class="form-control" name="sear_name" id="sear_name" value="" onkeypress="javascript:return getCoordCardListEvent(event);" placeholder="검색어를 입력하세요" style="width: 165px; float: left;">
							<button class="btn btn-sm btn-primary" style="float:left; width:50px; margin-top:2px; margin-left:6px" onclick="javascript:getCoordCardList(1);">검색</button>
							<button class="btn btn-sm btn-primary ClCardMulti" style="float:left; width:60px; margin-top:2px; margin-left:6px" disabled="" onclick="multiModify();">일괄수정</button>
					</div>
					<div style="width:100%; height:550px; overflow-y:auto; overflow-x:hidden; border:1px solid #cccccc;margin:0px; padding:0px">
						<div id="divCoordCardList_wrapper" class="dataTables_wrapper form-inline dt-bootstrap no-footer"><div class="row"><div class="col-sm-6"></div><div class="col-sm-6"></div></div><div class="row"><div class="col-sm-12"><div class="dataTables_scroll"><div class="dataTables_scrollHead" style="overflow: hidden; position: relative; border: 0px; width: 100%;"><div class="dataTables_scrollHeadInner" style="box-sizing: content-box; width: 298px; padding-right: 17px;"><table width="100%" class="table table-bordered table-hover dataTable no-footer" style="background-color: white; border-top: 1px solid rgb(222, 222, 222); border-bottom: 1px solid rgb(222, 222, 222); margin-top: 0px !important; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 0px; width: 298px;" role="grid"><thead>
						  <tr role="row"><th style="width: 59.8125px; text-align: center;" class="text-center sorting" tabindex="0" aria-controls="divCoordCardList" rowspan="1" colspan="1" aria-label="구역번호: activate to sort column ascending">구역번호</th><th style="text-align: center; width: 159.188px;" class="text-center sorting" tabindex="0" aria-controls="divCoordCardList" rowspan="1" colspan="1" aria-label="구역명칭: activate to sort column ascending">구역명칭</th></tr>
						  </thead></table></div></div><div class="dataTables_scrollBody" style="position: relative; overflow: auto; height: 500px; width: 100%;"><table width="100%" id="divCoordCardList" class="table table-bordered table-hover dataTable no-footer" style="background-color: white; border-top: 1px solid rgb(222, 222, 222); border-bottom: 1px solid rgb(222, 222, 222); margin: 0px !important; width: 100%;" role="grid"><thead>
						  <tr role="row" style="height: 0px;"><th style="width: 59.8125px; text-align: center; padding-top: 0px; padding-bottom: 0px; border-top-width: 0px; border-bottom-width: 0px; height: 0px;" class="text-center sorting" aria-controls="divCoordCardList" rowspan="1" colspan="1" aria-label="구역번호: activate to sort column ascending"><div class="dataTables_sizing" style="height:0;overflow:hidden;">구역번호</div></th><th style="text-align: center; width: 159.188px; padding-top: 0px; padding-bottom: 0px; border-top-width: 0px; border-bottom-width: 0px; height: 0px;" class="text-center sorting" aria-controls="divCoordCardList" rowspan="1" colspan="1" aria-label="구역명칭: activate to sort column ascending"><div class="dataTables_sizing" style="height:0;overflow:hidden;">구역명칭</div></th></tr>
						  </thead>
						  
						  <tbody> 
						  <tr role="row" class="odd"><td class=" text-center">2-3</td><td class=" text-center">경남대학교</td></tr><tr role="row" class="even"><td class=" text-center">12</td><td class=" text-center">12</td></tr><tr role="row" class="odd"><td class=" text-center">33</td><td class=" text-center">굿</td></tr><tr role="row" class="even"><td class=" text-center">5-1</td><td class=" text-center">테스트</td></tr><tr role="row" class="odd"><td class=" text-center">44</td><td class=" text-center">44</td></tr><tr role="row" class="even"><td class=" text-center">66</td><td class=" text-center">66</td></tr><tr role="row" class="odd"><td class=" text-center">77</td><td class=" text-center">77</td></tr><tr role="row" class="even"><td class=" text-center">88</td><td class=" text-center">88</td></tr><tr role="row" class="odd"><td class=" text-center">99</td><td class=" text-center">99</td></tr><tr role="row" class="even"><td class=" text-center">111</td><td class=" text-center">111</td></tr><tr role="row" class="odd"><td class=" text-center">223</td><td class=" text-center">223</td></tr><tr role="row" class="even"><td class=" text-center">445</td><td class=" text-center">445</td></tr><tr role="row" class="odd"><td class=" text-center">11222222</td><td class=" text-center">마산 대학교 경남 대학교 경찰서 마산역 CU 극장 약국</td></tr><tr role="row" class="even"><td class=" text-center">677</td><td class=" text-center">677</td></tr><tr role="row" class="odd"><td class=" text-center">8989</td><td class=" text-center">8989</td></tr><tr role="row" class="even"><td class=" text-center">1</td><td class=" text-center">농협</td></tr><tr role="row" class="odd"><td class=" text-center">2</td><td class=" text-center">굿</td></tr><tr role="row" class="even"><td class=" text-center">1-1</td><td class=" text-center">합포 1-1</td></tr><tr role="row" class="odd"><td class=" text-center">2-3</td><td class=" text-center">경남대학교</td></tr><tr role="row" class="even" style="color: rgb(255, 0, 0);"><td class=" text-center">1</td><td class=" text-center">[복사]농협<br>(사용중단)</td></tr><tr role="row" class="odd" style="color: rgb(255, 0, 0);"><td class=" text-center">1-1</td><td class=" text-center">[복사]합포 1-1<br>(사용중단)</td></tr></tbody>
						</table></div></div></div></div><div class="row"><div class="col-sm-5"></div><div class="col-sm-7"></div></div></div>
					</div>
				</div>
				<div id="map-container" style="width:750px;height:388px;display:inline-block">
					<div id="map_title-container" style="clear:both; float:center; width:100%;height:30px; background-color:white; color:#1C3AEE; font-weight:bold; display:inline-block; line-height:30px">
						<span style="padding-left:10px; height:30px; font-size:16px" id="map_title">
						</span>
					</div>
					<div id="map" style="clear: both; width: 100%; height: 550px; position: relative; overflow: hidden; background: url(&quot;https://t1.daumcdn.net/mapjsapi/images/bg_tile.png&quot;);">
					<div style="position: absolute; left: 0px; top: 0px; width: 100%; height: 100%; touch-action: none; cursor: url(&quot;https://t1.daumcdn.net/mapjsapi/images/cursor/openhand.cur.ico&quot;) 7 5, url(&quot;https://t1.daumcdn.net/mapjsapi/images/cursor/openhand.cur.ico&quot;), default;"><div style="position: absolute;"><div style="position: absolute; z-index: 0;"></div><div style="position: absolute; z-index: 1; left: 0px; top: 0px;"><img src="https://mts.daumcdn.net/api/v1/tile/PNGSD02/v16_xfdwm/latest/3/215/741.png" alt="" draggable="false" style="position: absolute; user-select: none; -webkit-user-drag: none; min-width: 0px; min-height: 0px; max-width: none; max-height: none; left: -11px; top: 298px; opacity: 1; transition-property: opacity; transition-duration: 0.2s; transition-timing-function: ease; width: 256px; height: 256px;"><img src="https://mts.daumcdn.net/api/v1/tile/PNGSD02/v16_xfdwm/latest/3/215/742.png" alt="" draggable="false" style="position: absolute; user-select: none; -webkit-user-drag: none; min-width: 0px; min-height: 0px; max-width: none; max-height: none; left: 245px; top: 298px; opacity: 1; transition-property: opacity; transition-duration: 0.2s; transition-timing-function: ease; width: 256px; height: 256px;"><img src="https://mts.daumcdn.net/api/v1/tile/PNGSD02/v16_xfdwm/latest/3/215/743.png" alt="" draggable="false" style="position: absolute; user-select: none; -webkit-user-drag: none; min-width: 0px; min-height: 0px; max-width: none; max-height: none; left: 501px; top: 298px; opacity: 1; transition-property: opacity; transition-duration: 0.2s; transition-timing-function: ease; width: 256px; height: 256px;"><img src="https://mts.daumcdn.net/api/v1/tile/PNGSD02/v16_xfdwm/latest/3/215/744.png" alt="" draggable="false" style="position: absolute; user-select: none; -webkit-user-drag: none; min-width: 0px; min-height: 0px; max-width: none; max-height: none; left: 757px; top: 298px; opacity: 1; transition-property: opacity; transition-duration: 0.2s; transition-timing-function: ease; width: 256px; height: 256px;"><img src="https://mts.daumcdn.net/api/v1/tile/PNGSD02/v16_xfdwm/latest/3/216/741.png" alt="" draggable="false" style="position: absolute; user-select: none; -webkit-user-drag: none; min-width: 0px; min-height: 0px; max-width: none; max-height: none; left: -11px; top: 42px; opacity: 1; transition-property: opacity; transition-duration: 0.2s; transition-timing-function: ease; width: 256px; height: 256px;"><img src="https://mts.daumcdn.net/api/v1/tile/PNGSD02/v16_xfdwm/latest/3/216/742.png" alt="" draggable="false" style="position: absolute; user-select: none; -webkit-user-drag: none; min-width: 0px; min-height: 0px; max-width: none; max-height: none; left: 245px; top: 42px; opacity: 1; transition-property: opacity; transition-duration: 0.2s; transition-timing-function: ease; width: 256px; height: 256px;"><img src="https://mts.daumcdn.net/api/v1/tile/PNGSD02/v16_xfdwm/latest/3/216/743.png" alt="" draggable="false" style="position: absolute; user-select: none; -webkit-user-drag: none; min-width: 0px; min-height: 0px; max-width: none; max-height: none; left: 501px; top: 42px; opacity: 1; transition-property: opacity; transition-duration: 0.2s; transition-timing-function: ease; width: 256px; height: 256px;"><img src="https://mts.daumcdn.net/api/v1/tile/PNGSD02/v16_xfdwm/latest/3/216/744.png" alt="" draggable="false" style="position: absolute; user-select: none; -webkit-user-drag: none; min-width: 0px; min-height: 0px; max-width: none; max-height: none; left: 757px; top: 42px; opacity: 1; transition-property: opacity; transition-duration: 0.2s; transition-timing-function: ease; width: 256px; height: 256px;"><img src="https://mts.daumcdn.net/api/v1/tile/PNGSD02/v16_xfdwm/latest/3/217/741.png" alt="" draggable="false" style="position: absolute; user-select: none; -webkit-user-drag: none; min-width: 0px; min-height: 0px; max-width: none; max-height: none; left: -11px; top: -214px; opacity: 1; transition-property: opacity; transition-duration: 0.2s; transition-timing-function: ease; width: 256px; height: 256px;"><img src="https://mts.daumcdn.net/api/v1/tile/PNGSD02/v16_xfdwm/latest/3/217/742.png" alt="" draggable="false" style="position: absolute; user-select: none; -webkit-user-drag: none; min-width: 0px; min-height: 0px; max-width: none; max-height: none; left: 245px; top: -214px; opacity: 1; transition-property: opacity; transition-duration: 0.2s; transition-timing-function: ease; width: 256px; height: 256px;"><img src="https://mts.daumcdn.net/api/v1/tile/PNGSD02/v16_xfdwm/latest/3/217/743.png" alt="" draggable="false" style="position: absolute; user-select: none; -webkit-user-drag: none; min-width: 0px; min-height: 0px; max-width: none; max-height: none; left: 501px; top: -214px; opacity: 1; transition-property: opacity; transition-duration: 0.2s; transition-timing-function: ease; width: 256px; height: 256px;"><img src="https://mts.daumcdn.net/api/v1/tile/PNGSD02/v16_xfdwm/latest/3/217/744.png" alt="" draggable="false" style="position: absolute; user-select: none; -webkit-user-drag: none; min-width: 0px; min-height: 0px; max-width: none; max-height: none; left: 757px; top: -214px; opacity: 1; transition-property: opacity; transition-duration: 0.2s; transition-timing-function: ease; width: 256px; height: 256px;"><img src="https://mts.daumcdn.net/api/v1/tile/PNGSD02/v16_xfdwm/latest/3/218/741.png" alt="" draggable="false" style="position: absolute; user-select: none; -webkit-user-drag: none; min-width: 0px; min-height: 0px; max-width: none; max-height: none; left: -11px; top: -470px; opacity: 1; transition-property: opacity; transition-duration: 0.2s; transition-timing-function: ease; width: 256px; height: 256px;"><img src="https://mts.daumcdn.net/api/v1/tile/PNGSD02/v16_xfdwm/latest/3/218/742.png" alt="" draggable="false" style="position: absolute; user-select: none; -webkit-user-drag: none; min-width: 0px; min-height: 0px; max-width: none; max-height: none; left: 245px; top: -470px; opacity: 1; transition-property: opacity; transition-duration: 0.2s; transition-timing-function: ease; width: 256px; height: 256px;"><img src="https://mts.daumcdn.net/api/v1/tile/PNGSD02/v16_xfdwm/latest/3/218/743.png" alt="" draggable="false" style="position: absolute; user-select: none; -webkit-user-drag: none; min-width: 0px; min-height: 0px; max-width: none; max-height: none; left: 501px; top: -470px; opacity: 1; transition-property: opacity; transition-duration: 0.2s; transition-timing-function: ease; width: 256px; height: 256px;"><img src="https://mts.daumcdn.net/api/v1/tile/PNGSD02/v16_xfdwm/latest/3/218/744.png" alt="" draggable="false" style="position: absolute; user-select: none; -webkit-user-drag: none; min-width: 0px; min-height: 0px; max-width: none; max-height: none; left: 757px; top: -470px; opacity: 1; transition-property: opacity; transition-duration: 0.2s; transition-timing-function: ease; width: 256px; height: 256px;"></div><div style="position: absolute; z-index: 1;"></div><div style="width: 750px; height: 550px; position: absolute; z-index: 1;"></div><div style="position: absolute; z-index: 1;"><svg version="1.1" style="stroke: none; stroke-dashoffset: 0.5; stroke-linejoin: round; fill: none; transform: translateZ(0px); position: absolute; width: 3750px; height: 2750px; left: -1500px; top: -1100px;" viewBox="0 0 3750 2750"><defs></defs></svg></div><div style="position: absolute; z-index: 1; width: 100%; height: 0px; transform: translateZ(0px);"></div></div></div><div style="position: absolute; cursor: default; z-index: 1; margin: 0px 6px; height: 19px; line-height: 14px; left: 0px; bottom: 0px; color: rgb(0, 0, 0);"><div style="color: rgb(0, 0, 0); text-align: center; font-size: 10px; float: left;"><div style="float: left; margin: 2px 3px 0px 4px; height: 6px; transition: width 0.1s; border-top: none rgb(0, 0, 0); border-right: 2px solid rgb(0, 0, 0); border-bottom: 2px solid rgb(0, 0, 0); border-left: 2px solid rgb(0, 0, 0); border-image: initial; width: 46px;"></div><div style="float: left; margin: 0px 4px 0px 0px; font-family: AppleSDGothicNeo-Regular, 돋움, dotum, sans-serif; font-weight: bold; color: rgb(0, 0, 0);">50m</div></div><div style="margin: 0px 4px; float: left;"><a target="_blank" href="http://map.kakao.com/" style="float: left; width: 32px; height: 10px;"><img src="https://t1.daumcdn.net/mapjsapi/images/m_bi_b.png" alt="Kakao 맵으로 이동(새창열림)" style="float: left; width: 32px; height: 10px; border: none;"></a><div style="font: 11px / 11px Arial, Tahoma, Dotum, sans-serif; float: left;"></div></div></div><div style="cursor: auto; position: absolute; z-index: 2; left: 0px; top: 0px;"><div style="width: 106px; height: 32px; box-sizing: content-box; background-color: rgb(255, 255, 255); padding: 2px; border-radius: 3px; box-shadow: rgba(0, 0, 0, 0.15) 0px 2px 2px 0px; position: absolute; left: 637px; top: 3px;"><button draggable="false" title="지도" type="button" style="float: left; cursor: default; width: 43px; height: 32px; user-select: none; -webkit-user-drag: none; border: none; background: url(&quot;https://t1.daumcdn.net/mapjsapi/images/control.png&quot;) -5px -183px / 116px 264px no-repeat; color: rgb(255, 255, 255); font-weight: bold;"></button><button draggable="false" title="스카이뷰" type="button" style="float: left; cursor: pointer; width: 63px; height: 32px; user-select: none; -webkit-user-drag: none; border: none; background: url(&quot;https://t1.daumcdn.net/mapjsapi/images/control.png&quot;) -48px -183px / 116px 264px no-repeat; color: rgb(0, 0, 0); font-weight: normal;"></button></div><div style="width: 32px; border-radius: 3px; box-shadow: rgba(0, 0, 0, 0.15) 0px 2px 2px 0px; position: absolute; left: 715px; top: 42px;"><button draggable="false" title="확대" type="button" style="float: left; cursor: pointer; width: 32px; height: 32px; user-select: none; -webkit-user-drag: none; border-top: none; border-right: none; border-bottom: 1px solid rgb(226, 226, 226); border-left: none; border-image: initial; background: url(&quot;https://t1.daumcdn.net/mapjsapi/images/control.png&quot;) -40px 0px / 116px 264px no-repeat rgb(255, 255, 255); border-radius: 3px 3px 0px 0px;"></button><div style="float: left; background: url(&quot;https://t1.daumcdn.net/mapjsapi/images/bg_zoom_control.png&quot;) repeat; padding: 7px 0px; transition: height, margin 0.1s;"><div style="cursor: pointer; position: relative; background-size: 116px 264px; transition: height 0.1s; margin: 2px 0px; display: block; width: 32px; height: 104px;"><div style="position: absolute; width: 4px; height: 100%; background-color: rgb(51, 150, 255); left: 50%; margin: 0px 0px 0px -2px;"><div style="width: 4px; height: 2px; margin-bottom: -2px; bottom: 0px; position: absolute; background: url(&quot;https://t1.daumcdn.net/mapjsapi/images/control.png&quot;) -50px -127px / 116px 264px;"></div><div style="width: 4px; height: 2px; margin-top: -2px; top: 0px; position: absolute; background: url(&quot;https://t1.daumcdn.net/mapjsapi/images/control.png&quot;) -40px -100px / 116px 264px;"></div></div><div style="position: absolute; background-color: rgb(204, 204, 204); transition: height 0.1s; left: 50%; margin: 0px 0px 0px -2px; width: 4px; height: 16px;"></div><div style="cursor: row-resize; position: absolute; width: 20px; height: 10px; margin: -4px 0px 0px -10px; background: url(&quot;https://t1.daumcdn.net/mapjsapi/images/control.png&quot;) -40px -80px / 116px 264px; left: 50%; transition: top 0.1s; top: 16px;"></div></div></div><button draggable="false" title="축소" type="button" style="float: left; cursor: pointer; width: 32px; height: 32px; user-select: none; -webkit-user-drag: none; border-top: 1px solid rgb(226, 226, 226); border-right: none; border-bottom: none; border-left: none; border-image: initial; background: url(&quot;https://t1.daumcdn.net/mapjsapi/images/control.png&quot;) -40px -32px / 116px 264px no-repeat rgb(255, 255, 255); border-radius: 0px 0px 3px 3px; margin: 0px;"></button><div style="display: none; position: absolute; margin: 41px 0px 0px -30px; background-size: 116px 264px; width: 30px; height: 104px;"><div style="position: absolute; width: 29px; height: 15px; margin: -6px 0px 0px; background: url(&quot;https://t1.daumcdn.net/mapjsapi/images/control.png&quot;) 0px -80px / 116px 264px; left: 0px; top: 8px;"></div><div style="position: absolute; width: 29px; height: 15px; margin: -6px 0px 0px; background: url(&quot;https://t1.daumcdn.net/mapjsapi/images/control.png&quot;) 0px -100px / 116px 264px; left: 0px; top: 32px;"></div><div style="position: absolute; width: 29px; height: 15px; margin: -6px 0px 0px; background: url(&quot;https://t1.daumcdn.net/mapjsapi/images/control.png&quot;) 0px -120px / 116px 264px; left: 0px; top: 64px;"></div><div style="position: absolute; width: 29px; height: 15px; margin: -6px 0px 0px; background: url(&quot;https://t1.daumcdn.net/mapjsapi/images/control.png&quot;) 0px -140px / 116px 264px; left: 0px; top: 80px;"></div><div style="position: absolute; width: 29px; height: 15px; margin: -6px 0px 0px; background: url(&quot;https://t1.daumcdn.net/mapjsapi/images/control.png&quot;) 0px -160px / 116px 264px; left: 0px; top: 96px;"></div></div></div></div></div>
					<div style="width:100%; height:40px; text-align:right; clear:both; margin-top:8px">
						<button class="btn btn-primary" onclick="javascript:selectOverlay('POLYLINE', event, true);">새 구역그리기 시작</button>
						<button class="btn btn-primary" onclick="javascript:completeDraw();">마침</button>
					</div>
				</div>
			</div>
		</div>
	</section>
	<div id="momentExplain" style="position:absolute; z-index:1; background-color:white; padding:5px; width:300px; display:none; border:1px solid #aaaaaa">
	</div>
	<script>
		var map = null;
		var manager = null;
		var options = null;
		var overlays = []; // 지도에 그려진 도형을 담을 배열
		var geocoder = null;
		var CoordCardList = null;
		var selectedRowCode = null;  //구역리스트에서 선택한 ROW의 CODE
		var selectedRowCoord = null; //구역리스트에서 선택한 ROW의 Coord
		$(document).ready(function() {
			var container = document.getElementById('map'); //지도를 담을 영역의 DOM 레퍼런스
			var mapOptions = { //지도를 생성할 때 필요한 기본 옵션
				center: new daum.maps.LatLng(33.450701, 126.570667), //지도의 중심좌표.
				level: 3 //지도의 레벨(확대, 축소 정도)
			};

			map = new daum.maps.Map(container, mapOptions); //지도 생성 및 객체 리턴

			options = { // Drawing Manager를 생성할 때 사용할 옵션입니다
				map: map, // Drawing Manager로 그리기 요소를 그릴 map 객체입니다
				drawingMode: [ // drawing manager로 제공할 그리기 요소 모드입니다
					daum.maps.drawing.OverlayType.MARKER,
					daum.maps.drawing.OverlayType.POLYLINE,
					daum.maps.drawing.OverlayType.RECTANGLE,
					daum.maps.drawing.OverlayType.CIRCLE,
					daum.maps.drawing.OverlayType.POLYGON
				],
				// 사용자에게 제공할 그리기 가이드 툴팁입니다
				// 사용자에게 도형을 그릴때, 드래그할때, 수정할때 가이드 툴팁을 표시하도록 설정합니다
				guideTooltip: ['draw', 'drag', 'edit'], 
				markerOptions: { // 마커 옵션입니다 
					draggable: true, // 마커를 그리고 나서 드래그 가능하게 합니다 
					removable: true // 마커를 삭제 할 수 있도록 x 버튼이 표시됩니다  
				},
				polylineOptions: { // 선 옵션입니다
					draggable: true, // 그린 후 드래그가 가능하도록 설정합니다
					removable: true, // 그린 후 삭제 할 수 있도록 x 버튼이 표시됩니다
					editable: true, // 그린 후 수정할 수 있도록 설정합니다 
					strokeColor: '#39f', // 선 색
					hintStrokeStyle: 'dash', // 그리중 마우스를 따라다니는 보조선의 선 스타일
					hintStrokeOpacity: 0.5  // 그리중 마우스를 따라다니는 보조선의 투명도
				},
				rectangleOptions: {
					draggable: true,
					removable: true,
					editable: true,
					strokeColor: '#39f', // 외곽선 색
					fillColor: '#39f', // 채우기 색
					fillOpacity: 0.5 // 채우기색 투명도
				},
				circleOptions: {
					draggable: true,
					removable: true,
					editable: true,
					strokeColor: '#39f',
					fillColor: '#39f',
					fillOpacity: 0.5
				},
				polygonOptions: {
					draggable: true,
					removable: true,
					editable: true,
					strokeColor: '#39f',
					fillColor: '#39f',
					fillOpacity: 0.5,
					hintStrokeStyle: 'dash',
					hintStrokeOpacity: 0.5
				}
			};

			// 위에 작성한 옵션으로 Drawing Manager를 생성합니다
			manager = new daum.maps.drawing.DrawingManager(options);

			// 주소-좌표 변환 객체를 생성합니다
			geocoder = new daum.maps.services.Geocoder();

			// 일반 지도와 스카이뷰로 지도 타입을 전환할 수 있는 지도타입 컨트롤을 생성합니다
			var mapTypeControl = new daum.maps.MapTypeControl();

			// 지도에 컨트롤을 추가해야 지도위에 표시됩니다
			// daum.maps.ControlPosition은 컨트롤이 표시될 위치를 정의하는데 TOPRIGHT는 오른쪽 위를 의미합니다
			map.addControl(mapTypeControl, daum.maps.ControlPosition.TOPRIGHT);

			// 지도 확대 축소를 제어할 수 있는  줌 컨트롤을 생성합니다
			var zoomControl = new daum.maps.ZoomControl();
			map.addControl(zoomControl, daum.maps.ControlPosition.RIGHT);

			//구역카드리스트 초기화
			tableInit();
			getCoordCardList(1);
					});

		function getCoordCardListEvent(e)
		{
			if(e.keyCode == 13)
			{
				getCoordCardList(1);
				return false;
			}
			return true;
		}

		function getCoordCardList(page_str)   //gubun = 테이블 코드값    page_str=현재페이지
		{
			adminLoadingStart('jw-container');			

			setTimeout(function(){
				var sear_name = $.trim($("#sear_name").val());
				var sear_gubun = $.trim($("#sear_group").val());			
				CoordCardList.page_str = page_str;
				$.ajax({
				type: 'POST',  
				url: "/adm/cardlist/getCoordCardTotalV2",
				data: {'sear_name':sear_name, "sear_gubun": sear_gubun},
				cache: false,
				async: false
				})
				.done(function( res ) {
					CoordCardList.records_cnt = eval(res);
				});

				$.ajax({
				type: 'POST',  
				url: "/adm/cardlist/getCoordCardListV2",
				data: { 'sear_name':sear_name, page: CoordCardList.page_str, article_cnt_per_page: CoordCardList.article_cnt_per_page, "sear_gubun": sear_gubun},
				cache: false,
				async: false
				})
				.done(function( rows ) {
					var no = CoordCardList.records_cnt;
					CoordCardList.clear();
					rows.forEach(function(value, index) {
						if(!value.use_yn || value.use_yn == "Y") {

						}
						else {
							value.card_name = value.card_name + "<br>(사용중단)"
						}		

						CoordCardList.row.add([value.card_code, value.coord_data, value.card_no, value.card_name, value.bigo, value.userbigo, value.max_chasu, value.need_team, value.what_hour, value.use_yn]);
						no--;
					});
					CoordCardList.draw(false);

					setTimeout(function(){
						CoordCardList.rows().every(function(rowIdx, tableLoop, rowLoop) {
							var row = this.node(); // 현재 행의 DOM 요소를 가져옴
							var rowData = this.data(); // 현재 행의 데이터를 가져옴
							var use_yn = $.trim(rowData[9]);

							if(!use_yn || use_yn == "Y") {

							}
							else {
								$(row).css({
	//							'background-color': '#dddddd', // 배경색 설정
								'color': 'red' // 글자색 설정
								});
							}
						});
						adminLoadingEnd('jw-container');
					}, 0);				  
	//				  $("#divPAGE").html(getPageString(AdminListTable, AdminListTable.page_str));
				});
			},0)
			
		}

		function tableInit()
		{
			//dt-body-center
			CoordCardList = $("#divCoordCardList").DataTable({
         "scrollY":        500,
			"ordering": true,
			"fixedColumns": true,
			"info": false,
			"searching": false,
			"paging": false,
			columnDefs: [{ targets: [0,1,4,5,6,7,8,9], visible: false}, { targets: [2,3], className: 'text-center'}],  // 첫번째 컬럼 숨김
			select: 'os',
			"language": {
			  "emptyTable": "No Data"
			},
			"lengthChange": false  // 페이지 크기는 조절하지 못하도록
			});
			CoordCardList.page_str = "1";   //현재 페이지
			CoordCardList.page_max = "9";  //최대 페이지
			CoordCardList.article_cnt_per_page = "10";  //페이지당 레코드 개수

			$("#divCoordCardList").on('click', 'tr', function () {

				setTimeout(function(){
					// 선택된 행의 개수 확인
					var selectedRows = CoordCardList.rows('.selected').count();
					// 선택된 행의 개수에 따라 조건부 처리
					if (selectedRows === 1) {
						// 단 하나의 행만 선택되었을 경우의 처리
						var data = CoordCardList.row('.selected').data();
						selectedRowCode = data[0];
						selectedRowCoord = data[1];
						var selectedRowName = data[3];
						if(selectedRowCode)
						{
							viewCardCoordInfo(selectedRowCode, selectedRowCoord, selectedRowName);
							//선택수정, 삭제 버튼 활성화
							$(".ClCardList").attr('disabled', false);
							$(".ClCardMulti").attr('disabled', true);
							
						}
						else
						{
							$(".ClCardList").attr('disabled', true);
							$(".ClCardMulti").attr('disabled', false);
						}
					} else if (selectedRows > 1) {
						// 여러 행이 선택되었을 경우의 처리
						//console.log("여러 행이 선택되었습니다.");
						removeAllFromMap();
						$(".ClCardList").attr('disabled', true);
						$(".ClCardMulti").attr('disabled', false);
					}
				}, 300)
			} );

			getCoordCardGroup();
		}

		function getCoordCardGroup()   //gubun = 테이블 코드값    page_str=현재페이지
		{
			$.ajax({
			  type: 'POST',  
			  url: "/adm/cardgroup/getCoordCardGroup",
			  data: { page: "1", article_cnt_per_page: "10000"},
			  cache: false,
			  async: false
			})
			.done(function( rows ) {
				  rows.forEach(function(value, index) {
					$('#sear_group').append($('<option>', {
						"value": value.group_code,
						"text": value.group_name
					}));
				  });
			});
		}		

		function selRowInfo(selectedRowCode)
		{
			var data = CoordCardList.data().toArray();
			var sel_card_code = "";
			var sel_coord_card = "";
			var sel_card_no = "";
			var sel_card_name = "";
			var sel_bigo = "";
			var sel_userbigo = "";
			var sel_maxchasu = "";
			var sel_needteam = "";
			var sel_whathour = "";
			var sel_use_yn = "";
			var foundediRow = 	"";
			data.forEach(function(row, i) {
				row.forEach(function(column, j) {
					if(j == 0 && column == selectedRowCode)
					{
						foundediRow = i;
						sel_card_code = column;
					}
					//console.log('row ' + i + ' column ' + j + ' value ' + column);
				});
			});
			data.forEach(function(row, i) {
				row.forEach(function(column, j) {
					if(j == 1 && i == foundediRow)
					{
						sel_coord_card = column;
					}
					else if(j == 2 && i == foundediRow)
					{
						sel_card_no = column;
					}
					else if(j == 3 && i == foundediRow)
					{
						sel_card_name = column;
					}
					else if(j == 4 && i == foundediRow)
					{
						sel_bigo = column;
					}
					else if(j == 5 && i == foundediRow)
					{
						sel_userbigo = column;
					}
					else if(j == 6 && i == foundediRow)
					{
						sel_maxchasu = column;
					}
					else if(j == 7 && i == foundediRow)
					{
						sel_needteam = column;
					}
					else if(j == 8 && i == foundediRow)
					{
						sel_whathour = column;
					}
					else if(j == 9 && i == foundediRow)
					{
						sel_use_yn = column;
					}
					
					//console.log('row ' + i + ' column ' + j + ' value ' + column);
				});
			});

			if(!sel_card_code){sel_card_code = "";}
			if(!sel_coord_card){sel_coord_card = "";}
			if(!sel_card_no){sel_card_no = "";}
			if(!sel_card_name){sel_card_name = "";}
			if(!sel_bigo){sel_bigo = "";}
			if(!sel_userbigo){sel_userbigo = "";}
			if(!sel_maxchasu){sel_maxchasu = "";}
			if(!sel_needteam){sel_needteam = "";}
			if(!sel_whathour){sel_whathour = "";}
			if(!sel_use_yn){sel_use_yn = "";}

			var returnObj = new Object();
			returnObj.cardcode = sel_card_code;
			returnObj.coord = sel_coord_card;
			returnObj.cardno = sel_card_no;
			returnObj.cardname = sel_card_name;
			returnObj.bigo = sel_bigo;
			returnObj.userbigo = sel_userbigo;
			returnObj.maxchasu = sel_maxchasu;
			returnObj.needteam = sel_needteam;
			returnObj.whathour = sel_whathour;
			returnObj.use_yn = sel_use_yn;
			return returnObj;
		}

		function selDelMap()
		{
			if(!selectedRowCode)
			{
				alerts("알림메시지","에러 : 선택된 정보 없음","500");
				return false;
			}
			var selRowObj = selRowInfo(selectedRowCode);
			Swal.fire({
			  title: "선택한 카드("+selRowObj.cardname+")를 정말 삭제하시겠습니까?",
			  text: "",
			  type: 'warning',
			  showCancelButton: true,
			  confirmButtonColor: '#3085d6',
			  cancelButtonColor: '#d33',
			  cancelButtonText: '아니오',
			  confirmButtonText: '예'
			}).then(function(result) {
			  if (result.value) {
					var return_val = "";
					$.ajax({
					  type: 'POST',  
					  url: "/adm/cardlist/carddel",
					  data: {'cardcode': selRowObj.cardcode},
					  cache: false,
					  async: false
					})
					.done(function( result ) {
						return_val = result;
					});
					if(return_val == "OK")
					{
						Swal.fire({
						  position: 'center',
						  type: 'success',
						  title: "정상 삭제되었습니다",
						  showConfirmButton: false,
						  timer: 1000
						});
						getCoordCardList(1);
					}
			  }
			})


		}

		//선택 구역 복사..
		function selCopyMap() {
			if(!selectedRowCode)
			{
				alerts("알림메시지","에러 : 선택된 정보 없음","500");
				return false;
			}

			var sel_card_code = "";
			var sel_coord_card = "";
			var sel_card_no = "";
			var sel_card_name = "";
			var sel_bigo = "";
			var selRowObj = selRowInfo(selectedRowCode);
			var contents = "";


			var additionHTML = "<button class='btn btn-primary' type='button' onclick=\"javascript:copyOkCoordCard('"+selRowObj.cardcode+"');\" style='float:center' id='btnCopy'>복사하기</button>"; 
			contents += "<div style='padding-left:5px; padding-right:5px; height:56px; display:inline-block; margin-top:10px; width:100%; clear:both'> <span style='width:100%; height:28px; line-height:28px; display:inline-block; float:right; padding-left:10px'>구역 위치가 표시된 <font color=red>'구역 카드'</font>, 그리고 그 <font color=red>'부속 가구'</font> 외 <font color=red>기타 정보(날짜별 봉사 내역)</font>는 복사되지 않습니다<br>구역명칭에 <font color=red>'[복사]' 문구</font>가 추가된 채로 복사되며 <font color=red>사용안함</font> 상태로 복사됩니다</span></div>";
			contents += "<div style='padding-left:5px; padding-right:5px; display:inline-block; margin-top:10px; margin-bottom:10px;  width:100%; clear:both; text-align:center'>"+additionHTML+"</div>";

			alerts("구역카드 복사",contents,750);
		}

		//선택 구역 수정..
		function selModifyMap()
		{
			if(!selectedRowCode)
			{
				alerts("알림메시지","에러 : 선택된 정보 없음","500");
				return false;
			}

			var sel_card_code = "";
			var sel_coord_card = "";
			var sel_card_no = "";
			var sel_card_name = "";
			var sel_bigo = "";
			var selRowObj = selRowInfo(selectedRowCode);

			selRowObj.cardname = selRowObj.cardname.replace("<br>(사용중단)", "");			

			var maxchasu1 = "";
			var maxchasu2 = "";
			var maxchasu3 = "";
			var maxchasu4 = "";
			var maxchasu5 = "";
			if(selRowObj.maxchasu == "1")
			{
				maxchasu1 = "checked";
			}
			else if(selRowObj.maxchasu == "2")
			{
				maxchasu2 = "checked";
			}
			else if(selRowObj.maxchasu == "3")
			{
				maxchasu3 = "checked";
			}
			else if(selRowObj.maxchasu == "4")
			{
				maxchasu4 = "checked";
			}
			else if(selRowObj.maxchasu == "5")
			{
				maxchasu5 = "checked";
			}

			var additionHTML = "<button class='btn btn-primary' type='button' onclick=\"javascript:modifyOkCoordCard('" + selRowObj.coord + "', '"+selRowObj.cardcode+"');\" style='float:center' id='btnSave'>저장하기</button>"; 

			var contents = "<div style='padding-left:5px; padding-right:5px; display:inline-block; margin-top:10px; width:100%; clear:both'><span style='width:20%; height:28px; line-height:28px; display:inline-block; float:left; font-weight:bold'>구역카드 번호</span> <span style='width:80%; height:28px; display:inline-block; float:right; padding-left:10px'><input type=\"text\" id=\"card_no\" name=\"card_no\" value=\""+selRowObj.cardno+"\" class=\"form-control\" Vimportant=\"pasti\" Vgubun=\"text\" Vname=\"구역카드 번호\"></span></div>";

			contents += "<div style='padding-left:5px; padding-right:5px; display:inline-block; margin-top:10px; width:100%; clear:both'><span style='width:20%; line-height:28px; display:inline-block; float:left; font-weight:bold'>구역카드 그룹</span> <span style='width:80%;  display:inline-block; float:right; padding-left:10px; padding-top:4px' id='spanGroupList'>-</span></div>";

			contents += "<div style='padding-left:5px; padding-right:5px; display:inline-block; margin-top:10px; width:100%; clear:both'><span style='width:20%; height:28px; line-height:28px; display:inline-block; float:left; font-weight:bold'>구역카드 명칭</span> <span style='width:80%; height:28px; display:inline-block; float:right; padding-left:10px'><input type=\"text\" id=\"card_name\" name=\"card_name\" value=\""+selRowObj.cardname+"\" class=\"form-control\" Vimportant=\"pasti\" Vgubun=\"text\" Vname=\"구역카드 명칭\"></span></div>";

			contents += "<div style='padding-left:5px; padding-right:5px; display:inline-block; margin-top:10px; width:100%; clear:both'><span style='width:20%; height:28px; line-height:28px; display:inline-block; float:left; font-weight:bold'>최대 방문차수</span> <span style='width:80%; height:28px; line-height:28px; margin-top:3px; display:inline-block; float:right; padding-left:10px'><input type=\"radio\" id=\"max_chasu1\" name=\"max_chasu\" value=\"1\" Vimportant=\"pasti\" Vgubun=\"ddl\" Vname=\"최대 방문차수\" "+maxchasu1+"><label for=\"max_chasu1\" style='margin-left:2px'>1차</label>  &nbsp; &nbsp; &nbsp;  <input type=\"radio\" id=\"max_chasu2\" name=\"max_chasu\" value=\"2\" Vimportant=\"pasti\" Vgubun=\"ddl\" Vname=\"최대 방문차수\" "+maxchasu2+"><label for=\"max_chasu2\" style='margin-left:2px'>2차</label>  &nbsp; &nbsp; &nbsp;   <input type=\"radio\" id=\"max_chasu3\" name=\"max_chasu\" value=\"3\" Vimportant=\"pasti\" Vgubun=\"ddl\" Vname=\"최대 방문차수\" "+maxchasu3+"><label for=\"max_chasu3\" style='margin-left:2px'>3차</label>  &nbsp; &nbsp; &nbsp;   <input type=\"radio\" id=\"max_chasu4\" name=\"max_chasu\" value=\"4\" Vimportant=\"pasti\" Vgubun=\"ddl\" Vname=\"최대 방문차수\" "+maxchasu4+"><label for=\"max_chasu4\" style='margin-left:2px'>4차</label>  &nbsp; &nbsp; &nbsp;   <input type=\"radio\" id=\"max_chasu5\" name=\"max_chasu\" value=\"5\" Vimportant=\"pasti\" Vgubun=\"ddl\" Vname=\"최대 방문차수\" "+maxchasu5+"><label for=\"max_chasu5\" style='margin-left:2px'>5차</label></span></div>";

			contents += "<div style='padding-left:5px; padding-right:5px; display:inline-block; margin-top:10px; width:100%; clear:both'><span style='width:20%; height:34px; line-height:34px; display:inline-block; float:left; font-weight:bold'>몇팀 구역?</span> <span style='width:80%; height:28px; margin-top:3px; display:inline-block; float:left; padding-left:10px'><span style='float:left'><input type=\"text\" id=\"need_team\" name=\"need_team\" value=\""+selRowObj.needteam+"\" class=\"form-control\" Vimportant=\"pasti\" Vgubun=\"text\" Vname=\"몇팀\" style='width:100px'></span><span style='float:left; line-height:34px'>＊숫자로 입력하세요</span></span></div>";

			contents += "<div style='padding-left:5px; padding-right:5px; display:inline-block; margin-top:10px; width:100%; clear:both'><span style='width:20%; height:28px; line-height:28px; display:inline-block; float:left; font-weight:bold'>사용요일</span> <span style='width:80%; height:28px; line-height:28px; display:inline-block; float:right; padding-left:10px'>구역카드와 패키지의 그룹배정 기능을 활용하세요</span></div>";

			contents += "<div style='padding-left:5px; padding-right:5px; display:inline-block; margin-top:10px; width:100%; clear:both'><span style='width:20%; height:28px; line-height:28px; display:inline-block; float:left; font-weight:bold'>사용시간대</span> <span style='width:80%; height:60px; display:inline-block; float:right; padding-left:10px'><textarea id=\"what_hour\" name=\"what_hour\" class=\"form-control\" Vimportant=\"pasti\" Vgubun=\"text\" Vname=\"사용시간대\">"+selRowObj.whathour+"</textarea></span></div>";

			var use_yn1 = "";
			var use_yn2 = "";
			if(selRowObj.use_yn == "N")
			{
				use_yn2 = "checked";
			}
			else
			{
				use_yn1 = "checked";
			}

			contents += "<div style='padding-left:5px; padding-right:5px; display:inline-block; margin-top:10px; width:100%; clear:both'><span style='width:20%; height:28px; line-height:28px; display:inline-block; float:left; font-weight:bold'>봉사시 사용여부</span> <span style='width:80%; height:28px; display:inline-block; float:right; padding-left:10px'><input type=\"radio\" id=\"use_yn1\" name=\"use_yn\" value=\"Y\" Vgubun=\"ddl\" Vname=\"사용가능\" "+use_yn1+" value='Y'><label for=\"use_yn1\" style='margin-left:2px'>Y(사용가능)</label> &nbsp; &nbsp; &nbsp; <input type=\"radio\" id=\"use_yn2\" name=\"use_yn\" value=\"N\" Vgubun=\"ddl\" Vname=\"사용불가\" "+use_yn2+" value='N'><label for=\"use_yn2\" style='margin-left:2px'>N(사용불가)</label></span><div style='width:80%; height:28px; float:right; font-size:14px; padding-left:10px; color:gray'>사용불가로 설정하더라도 이 구역카드가 포함된 패키지구역에는 영향을 주지 않습니다</div></div>";

			contents += "<div style='padding-left:5px; padding-right:5px; display:inline-block; margin-top:10px; width:100%; clear:both'><span style='width:20%; height:28px; line-height:28px; display:inline-block; float:left; font-weight:bold'>비고(관리자)</span> <span style='width:80%; height:60px; display:inline-block; float:right; padding-left:10px'><textarea id=\"bigo\" name=\"bigo\" class=\"form-control\" Vimportant=\"pasti\" Vgubun=\"text\" Vname=\"비고(관리자)\">"+selRowObj.bigo+"</textarea></span></div>";

			contents += "<div style='padding-left:5px; padding-right:5px; display:inline-block; margin-top:10px; width:100%; clear:both'><span style='width:20%; height:28px; line-height:28px; display:inline-block; float:left; font-weight:bold'>비고(전도인)</span> <span style='width:80%; height:60px; display:inline-block; float:right; padding-left:10px'><textarea id=\"userbigo\" name=\"userbigo\" class=\"form-control\" Vimportant=\"pasti\" Vgubun=\"text\" Vname=\"비고(전도인)\">"+selRowObj.userbigo+"</textarea></span></div>";

			contents += "<div style='padding-left:5px; padding-right:5px; display:inline-block; margin-top:10px; margin-bottom:10px;  width:100%; clear:both; text-align:center'>"+additionHTML+"</div>";

			alerts("내용 수정",contents,750);
			var groupHTML = getGroupList(selRowObj.cardcode);
			if(!groupHTML)
			{
				groupHTML = "-";
			}
			$("#spanGroupList").html(groupHTML);
		}

		function multiModify() {
			var selectedRows = CoordCardList.rows('.selected');

			var all_card_code = [];
			// 선택된 행들의 데이터 및 DOM 요소에 접근
			selectedRows.every(function (index, tableLoop, rowLoop) {
				var rowData = this.data(); // 현재 행의 데이터
				var rowNode = this.node(); // 현재 행의 DOM 요소
				var sel_card_code = rowData[0];
				all_card_code.push(sel_card_code);
			});

			var card_code_joinedString = all_card_code.join(',');

			var additionHTML = "<button class='btn btn-primary' type='button' onclick=\"javascript:modifyMultiCard('"+card_code_joinedString+"');\" style='float:center' id='btnSave'>저장하기</button>"; 
			var contents = "<div style='padding-left:5px; padding-right:5px; display:inline-block; margin-top:10px; width:100%; clear:both'><span style='width:20%; height:28px; line-height:28px; display:inline-block; float:left; font-weight:bold'>봉사시 사용여부</span> <span style='width:80%; height:28px; display:inline-block; float:right; padding-left:10px'><input type=\"radio\" id=\"multi_use_yn1\" name=\"multi_use_yn\" value=\"Y\" Vgubun=\"ddl\" Vname=\"사용가능\" value='Y'><label for=\"multi_use_yn1\" style='margin-left:2px'>Y(사용가능)</label> &nbsp; &nbsp; &nbsp; <input type=\"radio\" id=\"multi_use_yn2\" name=\"multi_use_yn\" value=\"N\" Vgubun=\"ddl\" Vname=\"사용불가\" value='N'><label for=\"multi_use_yn2\" style='margin-left:2px'>N(사용불가)</label></span><div style='width:80%; height:28px; float:right; font-size:14px; padding-left:10px; color:gray'>사용불가로 설정하더라도 이 구역카드가 포함된 패키지구역에는 영향을 주지 않습니다</div></div>";
			contents += "<div style='padding-left:5px; padding-right:5px; display:inline-block; margin-top:10px; margin-bottom:10px;  width:100%; clear:both; text-align:center'>"+additionHTML+"</div>";

			alerts("일괄 수정("+all_card_code.length+"개 구역)",contents,750);
		}

		function modifyMultiCard(card_code_joinedString) {
			var use_yn = $('input:radio[name="multi_use_yn"]:checked').val();
			if(!use_yn) {
				alert("사용여부를 선택해 주세요")
				return false;
			}

			$.ajax({
				  type: 'POST',  
				  url: "/adm/cardlist/modifyMultiCard",
				  data: { 'card_code_all': card_code_joinedString, "use_yn": use_yn},
				  cache: false,
				  async: false
			})
			.done(function( result ) {
				if(result == "OK") {
					Swal.fire({
						position: 'center',
						type: 'success',
						title: "정상 수정되었습니다",
						showConfirmButton: false,
						timer: 1000
					});
					closeMessage('winAlert');
					getCoordCardList(1);					
				}
			});			
		}

		//그룹 불러오기
		function getGroupList(cardCode)
		{
			var return_value = "";
			if(cardCode)
			{
				$.ajax({
				  type: 'POST',  
				  url: "/adm/cardlist/getGroupList",
				  data: { 'card_code': cardCode},
				  cache: false,
				  async: false
				})
				.done(function( rows ) {
				  rows.forEach(function(value, index) {
					  return_value += "<div style='width:100%; height:28px; margin:0px; padding:0px;'>"+value.group_name+"</div>";
				  });
				});
			}
			return return_value;
		}

		function reDraw(e)
		{
			if(!selectedRowCode)
			{
				alerts("알림메시지","먼저 다시 그릴 구역을 선택하세요","500");
				return false;
			}

			var selRowObj = selRowInfo(selectedRowCode);
//			selRowObj.coord			selRowObj.cardcode

			$("#momentExplain").css("left",(e.x-40));
			$("#momentExplain").css("top",(e.y-90));
			$("#momentExplain").html("1. 원하는 지도 위치가 아니라면, 먼저 '지도이동' 버튼으로 원하는 위치로 이동하세요. <Br>2. 구역 다시 그리기가 끝나면 '마침' 버튼을 클릭하세요.");
			$("#momentExplain").show();
			setTimeout("$('#momentExplain').hide()", 6000);
			selectOverlay('POLYLINE', null, false);
		}

		function completeRedraw()
		{
			var dataCoordCard = getDataFromDrawingMap();
			if(!dataCoordCard)
			{
				alerts("알림메시지","먼저 '구역그리기 시작'버튼으로 구역을 그려주세요.","500");
				return false;
			}

			var bPassed = false;
			var dataCoordCard_Arr = dataCoordCard.split(";");
			if(dataCoordCard_Arr.length > 1)
			{
				if(dataCoordCard_Arr[0] == dataCoordCard_Arr[dataCoordCard_Arr.length-1])
				{
					bPassed = true
				}
			}

			if(!bPassed)
			{
				Swal.fire({
				  position: 'center',
				  type: 'error',
				  title: "완성된 도형 형태로 구역을 그려주세요",
				  showConfirmButton: false,
				  timer: 1000
				});
				return false;
			}

			var selRowObj = selRowInfo(selectedRowCode);
			$.ajax({
				url : '/adm/cardlist/modifyOkCoordCard'
				, type : 'POST'
				, data : {'dataCoordCard':dataCoordCard, 'card_name':selRowObj.cardname, 'card_no':selRowObj.cardno, 'bigo':selRowObj.bigo, 'userbigo':selRowObj.userbigo, 'cardcode':selRowObj.cardcode}
				, cache: false
				, async: false
				, success : function(result) {
					removeAllFromMap();

					getCoordCardList(1);
					Swal.fire({
					  position: 'center',
					  type: 'success',
					  title: "정상 저장되었습니다.",
					  showConfirmButton: false,
					  timer: 1000
					});
				}
				, error:function(request,status,error){
					alerts("알림메시지","에러 발생 : 카드 다시그리기 완료 처리 중 에러 발생(관리자에게 문의하세요)","500");
				}
			});
		}

		function removeAllFromMap()
		{
			//그리기 취소
			manager.undo();

			// 그리기 중이면 그리기를 취소합니다
			manager.cancel();

			//이전의 그림들(구역카드들)을 삭제합니다
			removeOverlays();
		}

		//선택된 Row 선택해제
		function cardListUnselect()
		{
			CoordCardList.row(':eq('+CoordCardList.row( '.selected' ).index()+')', { page: 'current' }).deselect();
			//구역카드 명 나타내기
			$("#map_title").html("");

			selectedRowCode = "";  //구역리스트에서 선택한 ROW의 CODE
			selectedRowCoord = ""; //구역리스트에서 선택한 ROW의 Coord
		}

		// 버튼 클릭 시 호출되는 핸들러 입니다
		function selectOverlay(type, e, bUnselectCardList) {
			if(e)
			{
				$("#momentExplain").css("left",(e.x-120));
				$("#momentExplain").css("top",(e.y-70));
				$("#momentExplain").html("원하는 구역의 각 꼭지점을 순차적으로 지도에 클릭하세요!");
				$("#momentExplain").show();
				setTimeout("$('#momentExplain').hide()", 3000);
			}

			if(bUnselectCardList === true)
			{
				//선택된 Row 선택해제
				cardListUnselect();
			}

			removeAllFromMap();
			// 클릭한 그리기 요소 타입을 선택합니다

			CoordCardList.select();

			manager.select(daum.maps.drawing.OverlayType[type]);
		}

		function copyOkCoordCard(cardcode) {
			if(!confirm("정말 복사하시겠습니까? (시간이 걸릴수 있으니 기다려주세요!)")) {
				return false;
			}

			closeMessage('winAlert');
			$.ajax({
				url : '/adm/cardlist/copyOkCoordCard'
				, type : 'POST'
				, data : {'cardcode':cardcode}
				, cache: false
				, async: false
				, success : function(result) {
					if(result == "OK") {
						Swal.fire({
						position: 'center',
						type: 'success',
						title: "정상 복사되었습니다",
						showConfirmButton: false,
						timer: 1000
						});
						getCoordCardList(1);
					}
				}
				, error:function(request,status,error){
					alerts("알림메시지","에러 발생 : 카드 복사 중 에러 발생(관리자에게 문의하세요)","500");
				}
			});
		}

		function modifyOkCoordCard(dataCoordCard, cardcode)
		{
			var card_name = $.trim($("#card_name").val());
			if(!$.trim(dataCoordCard))
			{
				alerts_addmodue("알림메시지","[에러]카드 좌표 정보가 없습니다.","500");
				return false;
			}
			var card_no = $.trim($("#card_no").val());
			if(!$.trim(card_no))
			{
				alerts_addmodue("알림메시지","구역카드 번호를 입력해 주세요.","500");
				return false;
			}
			if(!$.trim(card_name))
			{
				alerts_addmodue("알림메시지","구역카드 명칭을 입력해 주세요.","500");
				return false;
			}
			var bigo = $.trim($("#bigo").val());
			var userbigo = $.trim($("#userbigo").val());

			var max_chasu = $('input:radio[name="max_chasu"]:checked').val();
			var need_team = $('#need_team').val();
			if($.trim(need_team) && isNaN(need_team))
			{
				alerts_addmodue("알림메시지","몇팀 구역인지 숫자로 입력해 주세요.","500");
				return false;
			}

			var what_hour = $('#what_hour').val();
			var use_yn = $('input:radio[name="use_yn"]:checked').val();

			closeMessage('winAlert');
			$.ajax({
				url : '/adm/cardlist/modifyOkCoordCard'
				, type : 'POST'
				, data : {'dataCoordCard':dataCoordCard, 'card_name':card_name, 'card_no':card_no, 'bigo':bigo, 'userbigo':userbigo, 'cardcode':cardcode, 'max_chasu':max_chasu, 'need_team':need_team, 'what_hour':what_hour, 'use_yn': use_yn}
				, cache: false
				, async: false
				, success : function(result) {
					Swal.fire({
					  position: 'center',
					  type: 'success',
					  title: "정상 저장되었습니다",
					  showConfirmButton: false,
					  timer: 1000
					});
					getCoordCardList(1);
				}
				, error:function(request,status,error){
					alerts("알림메시지","에러 발생 : 카드 정보 수정 중 에러 발생(관리자에게 문의하세요)","500");
				}
			});
		}

		function saveCoordCard(dataCoordCard)
		{
			var card_name = $.trim($("#card_name").val());
			if(!$.trim(dataCoordCard))
			{
				alerts_addmodue("알림메시지","[에러]카드 좌표 정보가 없습니다.","500");
				return false;
			}
			var card_no = $.trim($("#card_no").val());
			if(!$.trim(card_no))
			{
				alerts_addmodue("알림메시지","구역카드 번호를 입력해 주세요.","500");
				return false;
			}
			if(!$.trim(card_name))
			{
				alerts_addmodue("알림메시지","구역카드 명칭을 입력해 주세요.","500");
				return false;
			}
			var bigo = $.trim($("#bigo").val());
			var use_yn = $('input:radio[name="a_use_yn"]:checked').val();

			closeMessage('winAlert');
			$.ajax({
				url : '/adm/cardlist/saveCoordCard'
				, type : 'POST'
				, data : {'dataCoordCard':dataCoordCard, 'card_name':card_name, 'card_no':card_no, 'bigo':bigo, 'use_yn': use_yn}
				, cache: false
				, async: false
				, success : function(result) {
					Swal.fire({
					  position: 'center',
					  type: 'success',
					  title: "정상 저장되었습니다",
					  showConfirmButton: false,
					  timer: 1000
					});
					getCoordCardList(1);
				}
				, error:function(request,status,error){
					alerts("알림메시지","에러 발생 : 카드 정보 저장 중 에러 발생(관리자에게 문의하세요)","500");
				}
			});
		}

		function completeDraw()
		{
			var dataCoordCard = getDataFromDrawingMap();
			if(!dataCoordCard)
			{
				alerts("알림메시지","먼저 '구역그리기 시작'버튼으로 구역을 그려주세요.","500");
				return false;
			}

			var bPassed = false;
			var dataCoordCard_Arr = dataCoordCard.split(";");
			if(dataCoordCard_Arr.length > 1)
			{
				if(dataCoordCard_Arr[0] == dataCoordCard_Arr[dataCoordCard_Arr.length-1])
				{
					bPassed = true
				}
			}

			if(!bPassed)
			{
				Swal.fire({
				  position: 'center',
				  type: 'error',
				  title: "완성된 도형 형태로 구역을 그려주세요",
				  showConfirmButton: false,
				  timer: 1000
				});
				return false;
			}

			var additionHTML = "<button class='btn btn-primary' type='button' onclick=\"javascript:saveCoordCard('" + dataCoordCard + "');\" style='float:center' id='btnSave'>저장하기</button>"; 

			var contents = "<div style='padding-left:5px; padding-right:5px; display:inline-block; margin-top:10px;'><span style='width:120px; height:28px; line-height:28px; display:inline-block; float:left; font-weight:bold'>구역카드 번호</span> <span style='width:315px; height:28px; display:inline-block; float:right; padding-left:10px'><input type=\"text\" id=\"card_no\" name=\"card_no\" value=\"\" class=\"form-control\" Vimportant=\"pasti\" Vgubun=\"text\" Vname=\"구역카드 번호\"></span></div>";
			contents += "<div style='padding-left:5px; padding-right:5px; display:inline-block; margin-top:10px;'><span style='width:120px; height:28px; line-height:28px; display:inline-block; float:left; font-weight:bold'>구역카드 명칭</span> <span style='width:315px; height:28px; display:inline-block; float:right; padding-left:10px'><input type=\"text\" id=\"card_name\" name=\"card_name\" value=\"\" class=\"form-control\" Vimportant=\"pasti\" Vgubun=\"text\" Vname=\"구역카드 명칭\"></span></div>";

			contents += "<div style='padding-left:5px; padding-right:5px; display:inline-block; margin-top:10px;'><span style='width:120px; height:28px; line-height:28px; display:inline-block; float:left; font-weight:bold'>봉사시 사용여부</span> <span style='width:315px; height:28px; display:inline-block; float:right; padding-left:10px'><input type=\"radio\" id=\"a_use_yn1\" name=\"a_use_yn\" value=\"Y\" Vgubun=\"ddl\" Vname=\"사용가능\" value='Y' checked><label for=\"a_use_yn1\" style='margin-left:2px'>Y(사용가능)</label> &nbsp; &nbsp; &nbsp; <input type=\"radio\" id=\"a_use_yn2\" name=\"a_use_yn\" value=\"N\" Vgubun=\"ddl\" Vname=\"사용불가\" value='N'><label for=\"a_use_yn2\" style='margin-left:2px'>N(사용불가)</label></span></div>";

			contents += "<div style='padding-left:5px; padding-right:5px; display:inline-block; margin-top:10px;'><span style='width:120px; height:28px; line-height:28px; display:inline-block; float:left; font-weight:bold'>비고</span> <span style='width:315px; height:60px; display:inline-block; float:right; padding-left:10px'><textarea id=\"bigo\" name=\"bigo\" class=\"form-control\" Vimportant=\"pasti\" Vgubun=\"text\" Vname=\"비고\"></textarea></span></div>";
			contents += "<div style='padding-left:5px; padding-right:5px; display:inline-block; margin-top:10px; margin-bottom:10px; width:100%; text-align:center'>"+additionHTML+"</div>";

			alerts("내용 보기",contents,470);
		}

		function getMinFromPoints(points)
		{
			var minx = null
			var miny = null
			for(var i=0; i < points.length; i++)
			{
				if(minx == null || minx < eval(points[i].x))
				{
					minx = eval(points[i].x);
				}
				if(miny == null || miny < eval(points[i].y))
				{
					miny = eval(points[i].y);
				}
			}
			var returnObj = new Object();
			returnObj.x = minx;
			returnObj.y = miny;
			return returnObj;
		}

		function getMaxFromPoints(points)
		{
			var maxx = null
			var maxy = null
			for(var i=0; i < points.length; i++)
			{
				if(maxx == null || maxx > eval(points[i].x))
				{
					maxx = eval(points[i].x);
				}
				if(maxy == null || maxy > eval(points[i].y))
				{
					maxy = eval(points[i].y);
				}
			}
			var returnObj = new Object();
			returnObj.x = maxx;
			returnObj.y = maxy;
			return returnObj;
		}

		//폴리라인 기준으로 지도를 이동
		function mapMoveBasedPolyline(pointsXY)
		{
			// 버튼을 클릭하면 아래 배열의 좌표들이 모두 보이게 지도 범위를 재설정합니다 
			var points = [];
			
			for(var i=0; i < pointsXY.length; i++)
			{
				points.push(new daum.maps.LatLng(pointsXY[i].y, pointsXY[i].x));
			}

			// 지도를 재설정할 범위정보를 가지고 있을 LatLngBounds 객체를 생성합니다
			var bounds = new daum.maps.LatLngBounds();    

			var i, marker;
			for (i = 0; i < points.length; i++) {
				// LatLngBounds 객체에 좌표를 추가합니다
				bounds.extend(points[i]);
			}
			map.setBounds(bounds);
		}

		function viewCardCoordInfo(SelCode, SelCoordCard, SelName)
		{
			var SelCoordCard_Array = SelCoordCard.split(";");
			var points = new Array(SelCoordCard_Array.length);
			for(var i=0; i < points.length; i++)
			{
				var SelCoordCard_XY = SelCoordCard_Array[i].split(",");
				points[i] = new Object();
				points[i].x = SelCoordCard_XY[0];
				points[i].y = SelCoordCard_XY[1];
			}
			var styles = new Object();
			styles.strokeColor = "blue";
//			styles.strokeOpacity
//			styles.strokeStyle
//			styles.strokeWeight
			var lines = new Array(1);
			lines[0] = new Object();
			lines[0].points = points;
			lines[0].options = styles;

			removeAllFromMap();

			//폴리라인 그리기
			drawPolyline(lines);

			mapMoveBasedPolyline(points);

			//구역카드 명 나타내기
			$("#map_title").html(SelName);
		}

		// 아래 지도에 그려진 도형이 있다면 모두 지웁니다
		function removeOverlays() {
			var len = overlays.length, i = 0;

			for (; i < len; i++) {
				overlays[i].setMap(null);
			}

			overlays = [];
		}

		// Drawing Manager에서 가져온 데이터 중 마커를 아래 지도에 표시하는 함수입니다
		function drawMarker(markers) {
			var len = markers.length, i = 0;

			for (; i < len; i++) {
				var marker = new daum.maps.Marker({
					map: map, 
					position: new daum.maps.LatLng(markers[i].y, markers[i].x), 
					zIndex: markers[i].zIndex
				});

				overlays.push(marker);
			}
		}

		// Drawing Manager에서 가져온 데이터 중 선을 아래 지도에 표시하는 함수입니다
		function drawPolyline(lines) {
			var len = lines.length, i = 0;

			for (; i < len; i++) {
				var path = pointsToPath(lines[i].points);
				var style = lines[i].options;
				var polyline = new daum.maps.Polyline({
					map: map,
					path: path,
					strokeColor: style.strokeColor,
					strokeOpacity: style.strokeOpacity,
					strokeStyle: style.strokeStyle,
					strokeWeight: style.strokeWeight
				});

				overlays.push(polyline);
			}
		}

		// Drawing Manager에서 가져온 데이터 중 사각형을 아래 지도에 표시하는 함수입니다
		function drawRectangle(rects) {
			var len = rects.length, i = 0;

			for (; i < len; i++) {
				var style = rects[i].options;
				var rect = new daum.maps.Rectangle({
					map: map, 
					bounds: new daum.maps.LatLngBounds(
						new daum.maps.LatLng(rects[i].sPoint.y, rects[i].sPoint.x),
						new daum.maps.LatLng(rects[i].ePoint.y, rects[i].ePoint.x)
					), 
					strokeColor: style.strokeColor,
					strokeOpacity: style.strokeOpacity,
					strokeStyle: style.strokeStyle,
					strokeWeight: style.strokeWeight,
					fillColor: style.fillColor,
					fillOpacity: style.fillOpacity
				});

				overlays.push(rect);
			}
		}

		// Drawing Manager에서 가져온 데이터 중 원을 아래 지도에 표시하는 함수입니다
		function drawCircle(circles) {
			var len = circles.length, i = 0;

			for (; i < len; i++) {
				var style = circles[i].options;
				var circle = new daum.maps.Circle({
					map: map, 
					center: new daum.maps.LatLng(circles[i].center.y, circles[i].center.x), 
					radius: circles[i].radius,
					strokeColor: style.strokeColor,
					strokeOpacity: style.strokeOpacity,
					strokeStyle: style.strokeStyle,
					strokeWeight: style.strokeWeight,
					fillColor: style.fillColor,
					fillOpacity: style.fillOpacity
				});

				overlays.push(circle);
			}
		}

		// Drawing Manager에서 가져온 데이터 중 다각형을 아래 지도에 표시하는 함수입니다
		function drawPolygon(polygons) {
			var len = polygons.length, i = 0;

			for (; i < len; i++) {
				var path = pointsToPath(polygons[i].points);
				var style = polygons[i].options;
				var polygon = new daum.maps.Polygon({
					map: map,
					path: path,
					strokeColor: style.strokeColor,
					strokeOpacity: style.strokeOpacity,
					strokeStyle: style.strokeStyle,
					strokeWeight: style.strokeWeight,
					fillColor: style.fillColor,
					fillOpacity: style.fillOpacity
				});

				overlays.push(polygon);
			}
		}

		// Drawing Manager에서 가져온 데이터 중 
		// 선과 다각형의 꼭지점 정보를 daum.maps.LatLng객체로 생성하고 배열로 반환하는 함수입니다 
		function pointsToPath(points) {
			var len = points.length, 
				path = [], 
				i = 0;

			for (; i < len; i++) { 
				var latlng = new daum.maps.LatLng(points[i].y, points[i].x);
				path.push(latlng); 
			}

			return path;
		}

		// 가져오기 버튼을 클릭하면 호출되는 핸들러 함수입니다
		// Drawing Manager로 그려진 객체 데이터를 가져와 아래 지도에 표시합니다
		function getDataFromDrawingMap() {
			// Drawing Manager에서 그려진 데이터 정보를 가져옵니다 
			var data = manager.getData();

			removeAllFromMap();
			var returnValue = "";
			// 지도에 가져온 데이터로 도형들을 그립니다
			for(var i=0; i < data[daum.maps.drawing.OverlayType.POLYLINE].length; i++)
			{
				for(var j=0; j < data[daum.maps.drawing.OverlayType.POLYLINE][i].points.length; j++)
				{
					if(j==0)
					{
						returnValue = data[daum.maps.drawing.OverlayType.POLYLINE][i].points[j].x + "," + data[daum.maps.drawing.OverlayType.POLYLINE][i].points[j].y;
					}
					else
					{
						returnValue += ";" + data[daum.maps.drawing.OverlayType.POLYLINE][i].points[j].x + "," + data[daum.maps.drawing.OverlayType.POLYLINE][i].points[j].y;
					}
				}
			}
			return returnValue;
		}

		function moveMapData()
		{
			if($.trim($("#tbMoveToWant").val()) == "")
			{
				alerts("알림메시지","키워드 또는 주소가 입력되지 않았습니다","500");
				return false;
			}

			var selectedValue = $('input[name="ra_move"]:checked').val();
			if(selectedValue == "keyword")
			{
				// 장소 검색 객체를 생성합니다
				var ps = new daum.maps.services.Places(); 

				// 키워드로 장소를 검색합니다
				ps.keywordSearch($.trim($("#tbMoveToWant").val()), placesSearchCB); 
			}
			else if(selectedValue == "address")
			{

				// 주소로 좌표를 검색합니다
				geocoder.addressSearch($.trim($("#tbMoveToWant").val()), function(result, status) {

					// 정상적으로 검색이 완료됐으면 
					 if (status === daum.maps.services.Status.OK) {

						var coords = new daum.maps.LatLng(result[0].y, result[0].x);

						removeAllFromMap();

						// 지도의 중심을 결과값으로 받은 위치로 이동시킵니다
						map.setCenter(coords);
					} 
					else
					{
						alerts("알림메시지","검색되지 않았습니다. 다른 주소를 입력해보세요","500");
						return false;
					}
				});    
			}
		}

		// 키워드 검색 완료 시 호출되는 콜백함수 입니다
		function placesSearchCB (data, status, pagination) {
			if (status === daum.maps.services.Status.OK) {

				// 검색된 장소 위치를 기준으로 지도 범위를 재설정하기위해
				// LatLngBounds 객체에 좌표를 추가합니다
				var bounds = new daum.maps.LatLngBounds();

				for (var i=0; i<data.length; i++) {
//					displayMarker(data[i]);    
					bounds.extend(new daum.maps.LatLng(data[i].y, data[i].x));
				}       

				removeAllFromMap();

				// 검색된 장소 위치를 기준으로 지도 범위를 재설정합니다
				map.setBounds(bounds);
			} 
			else
			{
				alerts("알림메시지","검색되지 않았습니다. 다른 키워드를 입력해보세요","500");
				return false;
			}
		}

		function moveMapDataEvent(e)
		{
			if(e.keyCode == 13)
			{
				e.stopPropagation();
				e.preventDefault();

				moveMapData();
				return false;
			}

			return true;
		}

		function changeRaMove(SelectedValue)
		{
			var helptext = "";
			if(SelectedValue == "keyword")
			{
				helptext = "이동하고자 하는 키워드를 입력하세요(예: 마산역, 경남대학교)";
			}
			else if(SelectedValue == "address")
			{
				helptext = "이동하고자 하는 주소를 입력하세요";
			}
			$("#tbMoveToWant").attr("placeholder",helptext);
		}
	</script>
    </section>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->
  <!--footer class="main-footer">
  </footer-->

  <!-- /.control-sidebar -->
  <!-- Add the sidebar's background. This div must be placed
       immediately after the control sidebar -->
  <div class="control-sidebar-bg"></div>
</div>

  <div class="box box-success" style="width:500px; display:none; background-color:white" id="winAlert">
	<div class="box-header with-border" style="background-color:white">
	  <h3 class="box-title" id="alert_subject" style="background-color:white"></h3>
	  <div class="box-tools pull-right" style="background-color:white">
		<button class="btn btn-box-tool" onclick="javascript:closeMessage('winAlert');"><i class="fa fa-times" style="font-size:22px;padding-top:0px;margin-top:-2px"></i></button>
	  </div><!-- /.box-tools -->
	</div><!-- /.box-header -->
	<div class="box-body" id="alert_contents" style="font-size:15px;background-color:white">
	</div><!-- /.box-body -->
  </div><!-- /.box -->

  <div class="box box-success" style="width:500px; display:none; background-color:white" id="winAlert2">
	<div class="box-header with-border" style="background-color:white">
	  <h3 class="box-title" id="alert_subject2" style="background-color:white"></h3>
	  <div class="box-tools pull-right" style="background-color:white">
		<button class="btn btn-box-tool" onclick="javascript:closeMessage('winAlert2');"><i class="fa fa-times" style="font-size:22px;padding-top:0px;margin-top:-2px"></i></button>
	  </div><!-- /.box-tools -->
	</div><!-- /.box-header -->
	<div class="box-body" id="alert_contents2" style="font-size:15px;background-color:white">
	</div><!-- /.box-body -->
  </div><!-- /.box -->

   <div style="width: 140px; background-color: white; position: fixed; left: 45%; top: 50%; border: 1px solid rgb(170, 170, 170); text-align: center; padding: 20px; font-size: 18px; font-weight: bold; z-index: 99999; display: none;" id="winLoading">
		<i class="fa fa-spinner"></i> 로딩중..
   </div>
<!-- ./wrapper -->


<script src="/assets/js/jquery.bpopup2.min.js" type="text/javascript"></script>
<script src="/assets/js/jsCommonLib.js" type="text/javascript"></script>
<script src="/assets/js/jsCommonLib_Footer.js" type="text/javascript"></script></body></html>